name: OS and Python Sequential Test

on:
  workflow_dispatch:

jobs:
  ubuntu:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ['3.8', '3.9']
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python ${{ matrix.python-version }}
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}

      - name: Run script
        run: python 04-matrix-build-os/matrix_os_script.py

  windows:
    needs: ubuntu
    runs-on: windows-latest
    strategy:
      matrix:
        python-version: ['3.8', '3.9']
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python ${{ matrix.python-version }}
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}

      - name: Run script
        run: python 04-matrix-build-os/matrix_os_script.py

  macos:
    needs: windows
    runs-on: macos-latest
    strategy:
      matrix:
        python-version: ['3.8', '3.9']
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python ${{ matrix.python-version }}
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}

      - name: Run script
        run: python 04-matrix-build-os/matrix_os_script.py

  final-message:
    needs: macos
    runs-on: ubuntu-latest
    steps:
      - name: Echo completion message
        run: echo "Finished testing the script on all 3 operating systems"
